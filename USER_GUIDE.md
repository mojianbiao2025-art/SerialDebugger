# 串口调试助手使用指南

## 界面美化特性

### 现代化设计
- **深色菜单栏**：专业的深色主题菜单
- **彩色按钮**：不同功能使用不同颜色
  - 绿色：打开串口
  - 红色：发送数据
  - 橙色：刷新端口
  - 灰色：清空操作
  - 蓝色：其他操作
- **圆角设计**：所有控件都采用圆角设计
- **渐变效果**：波形图背景使用渐变色
- **阴影效果**：波形线条带有阴影，增加立体感

### 波形图特性
- **6通道彩色显示**：
  - 通道1：红色
  - 通道2：蓝色
  - 通道3：绿色
  - 通道4：橙色
  - 通道5：紫色
  - 通道6：青色
- **实时图例**：显示每个通道的当前值
- **网格线**：便于读取数值
- **自动缩放**：根据数据自动调整Y轴范围
- **数据点标记**：每5个点显示一个标记点

## 如何使用绘图功能

### 1. 数据格式

发送以下格式的数据即可自动绘图：

```
plotter 1.234 5.678 9.012
```

或者直接发送数值（用空格或逗号分隔）：

```
1.234 5.678 9.012
```

或：

```
1.234,5.678,9.012
```

### 2. 测试绘图

#### 方法一：使用虚拟串口
1. 下载并安装虚拟串口软件（如 com0com）
2. 创建一对虚拟串口（如 COM10 和 COM11）
3. 在程序中打开 COM10
4. 使用另一个串口工具向 COM11 发送数据

#### 方法二：使用 Arduino
```cpp
void setup() {
  Serial.begin(115200);
}

void loop() {
  float val1 = sin(millis() / 1000.0);
  float val2 = cos(millis() / 1000.0);
  float val3 = sin(millis() / 500.0) * 0.5;
  
  Serial.print("plotter ");
  Serial.print(val1, 4);
  Serial.print(" ");
  Serial.print(val2, 4);
  Serial.print(" ");
  Serial.println(val3, 4);
  
  delay(50);
}
```

#### 方法三：使用 Python 脚本
```python
import serial
import time
import math

ser = serial.Serial('COM10', 115200)

t = 0
while True:
    val1 = math.sin(t)
    val2 = math.cos(t)
    val3 = math.sin(t * 2) * 0.5
    
    data = f"plotter {val1:.4f} {val2:.4f} {val3:.4f}\n"
    ser.write(data.encode())
    
    t += 0.1
    time.sleep(0.05)
```

### 3. 查看绘图

1. 切换到 **Plotter** 标签页
2. 上方显示实时波形图
3. 下方显示统计信息：
   - Last：最新值
   - Avg：平均值
   - Min：最小值
   - Max：最大值
   - Points：数据点数

### 4. 多通道绘图

发送多个数值即可在多个通道显示：

```
plotter 1.0 2.0 3.0 4.0 5.0 6.0
```

这将在6个通道分别显示这6个值。

## 高级功能使用

### 自动发送
1. 在发送区输入要发送的数据
2. 勾选 **Auto Send** 复选框
3. 设置发送间隔（10-10000ms）
4. 程序将自动循环发送

### 命令列表
1. 在发送区输入常用命令
2. 点击右侧 **Add Command** 按钮保存
3. 双击已保存的命令快速填充到发送区
4. 选中命令后点击 **Delete Command** 删除

### 换行控制
- **Add LF**：添加换行符（\n）
- **Add CR**：添加回车符（\r）
- **Add New Line**：添加 CR+LF（\r\n）

### HEX 模式
- **HEX Display**：以十六进制显示接收数据
- **HEX Send**：以十六进制格式发送数据

### 时间戳
勾选 **Show Timestamp** 可在每条接收数据前显示时间戳。

## 快捷操作

### 菜单栏
- **文件 → 保存接收数据**：保存接收区内容
- **文件 → 保存发送数据**：保存发送区内容
- **查看 → 清空全部**：清空所有数据和图表
- **语言**：切换界面语言
- **帮助 → 关于**：查看程序信息

### 键盘快捷键
- 双击命令列表项：快速填充命令

## 界面布局

### 主窗口（Main 标签）
```
┌─────────────────────────────────────────────────┐
│ 菜单栏                                          │
├─────────────────────────────────────────────────┤
│ 串口设置区                                      │
│ [串口] [波特率] [数据位] [停止位] [校验位]     │
├─────────────────────────────────────────────────┤
│ 接收区                                          │
│ [接收数据显示]                                  │
│ □ HEX显示  □ 显示时间戳  [清空]               │
├─────────────────────────────────────────────────┤
│ 发送区                                          │
│ [发送数据输入]                                  │
│ □ HEX发送  □ 发送新行  [清空] [发送]          │
│ □ Auto Send [1000] ms  □ Add LF  □ Add CR     │
└─────────────────────────────────────────────────┘
```

### 绘图窗口（Plotter 标签）
```
┌─────────────────────────────────────────────────┐
│ 实时波形图                                      │
│ ┌───────────────────────────────────────────┐  │
│ │ [图例]                                    │  │
│ │ ─ Graph 1: 1.2345                        │  │
│ │ ─ Graph 2: -0.5678                       │  │
│ │ [波形显示区]                              │  │
│ └───────────────────────────────────────────┘  │
├─────────────────────────────────────────────────┤
│ 统计信息                                        │
│ Graph 1: Last=1.2345 Avg=0.5678 Min=-1.0 ...  │
└─────────────────────────────────────────────────┘
```

### 命令列表（右侧停靠窗口）
```
┌─────────────────┐
│ Command List    │
├─────────────────┤
│ CMD_1 | test    │
│ CMD_2 | hello   │
│ CMD_3 | data    │
├─────────────────┤
│ [Add Command]   │
│ [Delete Command]│
└─────────────────┘
```

## 颜色方案

### 按钮颜色
- **蓝色** (#3498db)：常规操作按钮
- **绿色** (#27ae60)：打开串口
- **红色** (#e74c3c)：发送数据
- **橙色** (#f39c12)：刷新端口
- **灰色** (#95a5a6)：清空操作

### 状态栏
- **深灰色** (#34495e)：背景
- **白色**：文字

### 菜单栏
- **深蓝灰** (#2c3e50)：背景
- **青色** (#1abc9c)：选中项

## 常见问题

### Q: 为什么看不到波形？
A: 确保发送的数据包含数值，格式如 `plotter 1.23 4.56`

### Q: 如何测试绘图功能？
A: 使用虚拟串口或 Arduino 发送测试数据

### Q: 波形显示不完整？
A: 程序最多保存1000个数据点，超过会自动删除旧数据

### Q: 如何改变波形颜色？
A: 当前版本使用固定颜色，未来版本将支持自定义

### Q: 支持多少个通道？
A: 最多支持6个通道同时显示

## 技术规格

- **最大数据点**：1000点/通道
- **通道数量**：6个
- **刷新率**：实时（取决于数据接收速度）
- **支持波特率**：9600 - 115200
- **数据格式**：文本或HEX
- **文件保存**：TXT格式

## 更新日志

### v1.0.0
- 初始版本
- 基础串口通信功能
- 多语言支持（5种语言）
- 实时波形绘制
- 命令列表管理
- 自动发送功能
- 现代化UI设计
