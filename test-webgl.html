<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>WebGL æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }
        .success {
            background: #e8f5e9;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4caf50;
        }
        .error {
            background: #ffebee;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #f44336;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
        canvas {
            border: 2px solid #333;
            display: block;
            margin: 20px auto;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ WebGL æ”¯æŒæµ‹è¯•</h1>
        
        <div id="result"></div>
        
        <h2>æµ‹è¯• Canvas</h2>
        <canvas id="testCanvas" width="400" height="300"></canvas>
        
        <h2>è¯¦ç»†ä¿¡æ¯</h2>
        <pre id="details"></pre>
        
        <div class="info">
            <strong>è¯´æ˜ï¼š</strong><br>
            - å¦‚æœçœ‹åˆ°ç»¿è‰²èƒŒæ™¯ï¼Œè¯´æ˜ WebGL å¯ç”¨<br>
            - å¦‚æœçœ‹åˆ°çº¢è‰²é”™è¯¯ï¼Œè¯´æ˜ WebGL ä¸å¯ç”¨<br>
            - Qt WebAssembly éœ€è¦ WebGL æ‰èƒ½æ¸²æŸ“ç•Œé¢
        </div>
    </div>

    <script>
        var details = [];
        
        function addDetail(text) {
            details.push(text);
            document.getElementById('details').textContent = details.join('\n');
        }

        function testWebGL() {
            var canvas = document.getElementById('testCanvas');
            var resultDiv = document.getElementById('result');
            
            addDetail('æµè§ˆå™¨: ' + navigator.userAgent);
            addDetail('');
            
            // Test WebGL 1.0
            addDetail('=== æµ‹è¯• WebGL 1.0 ===');
            var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            
            if (gl) {
                resultDiv.innerHTML = '<div class="success"><strong>âœ“ WebGL å¯ç”¨ï¼</strong><br>æ‚¨çš„æµè§ˆå™¨æ”¯æŒ WebGLï¼ŒQt åº”ç”¨åº”è¯¥å¯ä»¥æ­£å¸¸æ¸²æŸ“ã€‚</div>';
                
                addDetail('WebGL 1.0: å¯ç”¨ âœ“');
                addDetail('ç‰ˆæœ¬: ' + gl.getParameter(gl.VERSION));
                addDetail('ä¾›åº”å•†: ' + gl.getParameter(gl.VENDOR));
                addDetail('æ¸²æŸ“å™¨: ' + gl.getParameter(gl.RENDERER));
                addDetail('ç€è‰²å™¨è¯­è¨€ç‰ˆæœ¬: ' + gl.getParameter(gl.SHADING_LANGUAGE_VERSION));
                
                // Draw a green triangle to test rendering
                gl.clearColor(0.0, 1.0, 0.0, 1.0);
                gl.clear(gl.COLOR_BUFFER_BIT);
                
                addDetail('');
                addDetail('Canvas å·²æ¸…å±ä¸ºç»¿è‰²');
                
                // Test WebGL 2.0
                addDetail('');
                addDetail('=== æµ‹è¯• WebGL 2.0 ===');
                var gl2 = canvas.getContext('webgl2');
                if (gl2) {
                    addDetail('WebGL 2.0: å¯ç”¨ âœ“');
                    addDetail('ç‰ˆæœ¬: ' + gl2.getParameter(gl2.VERSION));
                } else {
                    addDetail('WebGL 2.0: ä¸å¯ç”¨ (ä½† WebGL 1.0 è¶³å¤Ÿ)');
                }
                
                // Test extensions
                addDetail('');
                addDetail('=== å¯ç”¨çš„æ‰©å±• ===');
                var extensions = gl.getSupportedExtensions();
                if (extensions && extensions.length > 0) {
                    addDetail('æ‰©å±•æ•°é‡: ' + extensions.length);
                    extensions.slice(0, 10).forEach(function(ext) {
                        addDetail('  - ' + ext);
                    });
                    if (extensions.length > 10) {
                        addDetail('  ... è¿˜æœ‰ ' + (extensions.length - 10) + ' ä¸ªæ‰©å±•');
                    }
                } else {
                    addDetail('æ²¡æœ‰å¯ç”¨çš„æ‰©å±•');
                }
                
            } else {
                resultDiv.innerHTML = '<div class="error"><strong>âœ— WebGL ä¸å¯ç”¨ï¼</strong><br>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ WebGLï¼Œæˆ–è€… WebGL è¢«ç¦ç”¨äº†ã€‚<br><br><strong>è§£å†³æ–¹æ¡ˆï¼š</strong><br>1. å¯ç”¨ç¡¬ä»¶åŠ é€Ÿï¼šè®¾ç½® â†’ ç³»ç»Ÿ â†’ ç¡¬ä»¶åŠ é€Ÿ<br>2. å¯ç”¨ WebGLï¼šè®¿é—® chrome://flags æœç´¢ WebGL<br>3. æ›´æ–°æ˜¾å¡é©±åŠ¨<br>4. è®¿é—® chrome://gpu æŸ¥çœ‹è¯¦ç»†çŠ¶æ€</div>';
                
                addDetail('WebGL 1.0: ä¸å¯ç”¨ âœ—');
                addDetail('');
                addDetail('å¯èƒ½çš„åŸå› ï¼š');
                addDetail('1. ç¡¬ä»¶åŠ é€Ÿè¢«ç¦ç”¨');
                addDetail('2. WebGL åœ¨æµè§ˆå™¨è®¾ç½®ä¸­è¢«ç¦ç”¨');
                addDetail('3. æ˜¾å¡é©±åŠ¨è¿‡æ—§æˆ–ä¸å…¼å®¹');
                addDetail('4. æµè§ˆå™¨å®‰å…¨ç­–ç•¥é˜»æ­¢');
                addDetail('');
                addDetail('è¯·è®¿é—®ä»¥ä¸‹é“¾æ¥æ£€æŸ¥ï¼š');
                addDetail('- chrome://gpu (æŸ¥çœ‹ GPU çŠ¶æ€)');
                addDetail('- chrome://flags (æœç´¢ WebGL)');
                addDetail('- https://get.webgl.org/ (å®˜æ–¹æµ‹è¯•)');
                
                // Try to get more info
                var debugInfo = gl ? gl.getExtension('WEBGL_debug_renderer_info') : null;
                if (debugInfo) {
                    addDetail('');
                    addDetail('è°ƒè¯•ä¿¡æ¯ï¼š');
                    addDetail('ä¾›åº”å•†: ' + gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL));
                    addDetail('æ¸²æŸ“å™¨: ' + gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL));
                }
            }
        }

        // Run test
        testWebGL();
    </script>
</body>
</html>
